Use DP with bit manipulation to count set bits for each number from 0 to n.
Relation: ans[i] = ans[i >> 1] + (i & 1)
i >> 1 → number of set bits in i without the last bit.
(i & 1) → adds 1 if the last bit of i is set, else 0.

Time Complexity
O(n) → Each number from 1 to n is processed once.

Space Complexity
O(n) → Result array ans of size n + 1.

Code
class Solution
{
public:
    vector<int> countBits(int n)
    {
        vector<int> ans(n + 1);
        ans[0] = 0;

        for(int i = 1; i <= n; i++)
            ans[i] = ans[i >> 1] + (i & 1);

        return ans;
    }
};